import React, { useEffect, useRef } from "react";
import gsap from "gsap";
import styled, { keyframes } from "styled-components";
import { accueil, mainColor } from "./components/Common";

const Container = styled.section`
  height: 100vh;
  width: 100%;
  position: fixed;
  display: flex;
  justify-content: center;
  align-items: center;
  top: 0;
  z-index: 2000;
  background: ${mainColor};
  opacity: 0;
  user-select: none;
`;
const Bloc = styled.div`
  display: flex;
  justify-content: space-around;
  align-items: center;
  flex-direction: column;
  width: 400px;
  z-index: 1500;

  & svg {
    overflow: hidden;
    margin-bottom: 15rem;
  }
`;
const Overlay = styled.div`
  position: absolute;
  height: 100%;
  width: 100%;
  background-color: ${accueil};
  z-index: 200;
`;
const Background = styled.div`
  position: absolute;
  height: 100%;
  width: 100%;
  background-color: ${mainColor};
  z-index: 2000;
`;

const loaderRotate = keyframes`
   from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
`;

const Circle = styled.div`
  left: calc(50% - 25px);
  width: 50px;
  height: 50px;
  border: 4px solid #f7ece2;
  border-left: 4px solid ${accueil};
  border-radius: 100px;
  animation: ${loaderRotate} 1s linear infinite;
  transition: 0.4s;
  transition-delay: 0.2s;
  z-index: 10;
`;

function Loader() {
  let container = useRef(null);
  let pathOne = useRef(null);
  let pathTwo = useRef(null);
  let pathThree = useRef(null);
  let overlay = useRef(null);
  let background = useRef(null);

  useEffect(() => {
    gsap.fromTo(
      container.current,
      {
        opacity: 1,
        y: 0 + "%",
        skewY: 0 + "deg",
      },
      {
        duration: 1.8,
        ease: "expo.out",
        delay: 3,
        skewY: 2.5 + "deg",
        y: -110 + "%",
        display: "none"
      }
    );
    gsap.fromTo(
      overlay.current,
      {
        x: -100 + "%",
      },
      {
        delay: 2,
        duration: 2.2,
        ease: "Expo.easeOut",
        x: 100 + "%",
      }
    );
    gsap.fromTo(
      background.current,
      {
        x: -100 + "%",
      },
      {
        delay: 2.2,
        x: 0 + "%",
      }
    );
    gsap.fromTo(
      pathOne.current,
      {
        y: 200 + "%",
      },
      {
        delay: 1.2,
        y: 0,
        opacity: 1,
        ease: "power2.out",
      }
    );
    gsap.fromTo(
      pathTwo.current,
      {
        y: -120 + "%",
      },
      {
        delay: 0.8,
        y: 0,
        opacity: 1,
        ease: "power2.out",
      }
    );
    gsap.fromTo(
      pathThree.current,
      {
        x: -220 + "%",
      },
      {
        ease: "power2.out",
        delay: 1,
        x: 0,
        opacity: 1,
      }
    );
  }, []);
  return (
    <Container ref={container}>
      <Overlay ref={overlay} />
      <Background ref={background} />
      <Bloc>
        <svg
          width="120"
          viewBox="0 0 179 122"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0.871094 115.502H7.26953C9.84766 115.502 12.0703 114.729 13.9375 113.182C15.8047 111.635 16.8945 109.471 17.207 106.689L17.3125 106.057C17.6328 103.268 17.0352 101.107 15.5195 99.5762C14.0039 98.0371 11.957 97.2676 9.37891 97.2676H2.98047L0.871094 115.502ZM4.04688 113.029L5.59375 99.752H9.02734C10.8477 99.752 12.25 100.279 13.2344 101.334C14.2188 102.389 14.5938 103.947 14.3594 106.01L14.2305 106.76C13.9961 108.814 13.2695 110.373 12.0508 111.436C10.832 112.498 9.30859 113.029 7.48047 113.029H4.04688ZM19.2578 115.502H22.1992L24.2969 97.2676H21.3672L19.2578 115.502ZM25.5859 110.369C25.3984 112.119 25.9375 113.471 27.2031 114.424C28.4688 115.377 30.2383 115.854 32.5117 115.854C34.8008 115.854 36.6602 115.377 38.0898 114.424C39.5273 113.471 40.3398 112.178 40.5273 110.545C40.707 108.99 40.3555 107.814 39.4727 107.018C38.5977 106.213 37.0508 105.529 34.832 104.967C32.7305 104.443 31.3555 103.975 30.707 103.561C30.0664 103.146 29.7891 102.627 29.875 102.002C29.9688 101.158 30.3672 100.514 31.0703 100.068C31.7734 99.623 32.8359 99.4004 34.2578 99.4004C35.6953 99.4004 36.7344 99.6699 37.375 100.209C38.0156 100.748 38.2891 101.467 38.1953 102.365L38.1602 102.611H41.0312L41.0664 102.318C41.2305 100.771 40.7266 99.4824 39.5547 98.4512C38.3906 97.4199 36.7148 96.9043 34.5273 96.9043C32.3242 96.9043 30.5469 97.377 29.1953 98.3223C27.8516 99.2598 27.0938 100.506 26.9219 102.061C26.75 103.451 27.082 104.549 27.918 105.354C28.7617 106.15 30.3047 106.826 32.5469 107.381C34.7812 107.928 36.1992 108.424 36.8008 108.869C37.4102 109.314 37.668 109.908 37.5742 110.65C37.4805 111.471 37.0273 112.131 36.2148 112.631C35.4023 113.131 34.2578 113.381 32.7812 113.381C31.3047 113.381 30.1953 113.127 29.4531 112.619C28.7109 112.111 28.3906 111.342 28.4922 110.311L28.5273 109.994H25.6211L25.5859 110.369ZM42.8477 99.8105H49.2461L47.418 115.502H50.3477L52.1641 99.8105H58.5508L58.832 97.2676H43.1406L42.8477 99.8105ZM58.8438 115.502H61.7617L62.5703 108.482H66.7422C68.8672 108.467 70.5781 107.951 71.875 106.936C73.1797 105.92 73.9297 104.564 74.125 102.869C74.3281 101.127 73.8984 99.7598 72.8359 98.7676C71.7812 97.7676 70.1836 97.2676 68.043 97.2676H60.9531L58.8438 115.502ZM62.8281 106.033L63.5781 99.7637H67.6211C69.0742 99.7637 70.0625 100.045 70.5859 100.607C71.1094 101.17 71.3125 101.936 71.1953 102.904C71.0859 103.857 70.6992 104.619 70.0352 105.189C69.3789 105.752 68.3242 106.033 66.8711 106.033H62.8281ZM70.3984 115.502H73.6797L69.8945 107.369L66.6367 107.146L70.3984 115.502ZM75.8594 115.502H78.8008L80.8984 97.2676H77.9688L75.8594 115.502ZM82.5625 115.502H90.0625C92.0625 115.502 93.7188 115.053 95.0312 114.154C96.3516 113.256 97.1094 111.967 97.3047 110.287C97.4453 109.084 97.2461 108.119 96.707 107.393C96.1758 106.666 95.4453 106.178 94.5156 105.928V105.881C95.3203 105.623 96.0195 105.174 96.6133 104.533C97.2148 103.885 97.5703 103.053 97.6797 102.037C97.875 100.381 97.4453 99.1738 96.3906 98.416C95.3438 97.6504 93.8086 97.2676 91.7852 97.2676H84.6719L82.5625 115.502ZM85.7031 113.123L86.3945 107.17H90.8711C92.1992 107.17 93.1484 107.432 93.7188 107.955C94.2891 108.479 94.5195 109.197 94.4102 110.111C94.293 111.072 93.8867 111.814 93.1914 112.338C92.5039 112.861 91.5 113.123 90.1797 113.123H85.7031ZM86.6523 104.896L87.2734 99.6582H91.3633C92.6758 99.666 93.5977 99.8926 94.1289 100.338C94.668 100.775 94.8867 101.428 94.7852 102.295C94.6836 103.123 94.3125 103.764 93.6719 104.217C93.0312 104.67 92.0508 104.896 90.7305 104.896H86.6523ZM100.188 108.764C99.9141 111.162 100.43 112.943 101.734 114.107C103.047 115.271 104.785 115.854 106.949 115.854C109.105 115.854 110.957 115.275 112.504 114.119C114.051 112.955 114.957 111.17 115.223 108.764L116.582 97.2676H113.477L112.105 108.775C111.934 110.354 111.402 111.506 110.512 112.232C109.629 112.959 108.5 113.322 107.125 113.322C105.742 113.322 104.68 112.959 103.938 112.232C103.195 111.498 102.91 110.346 103.082 108.775L104.453 97.2676H101.535L100.188 108.764ZM118.199 99.8105H124.598L122.77 115.502H125.699L127.516 99.8105H133.902L134.184 97.2676H118.492L118.199 99.8105ZM134.219 115.502H137.16L139.258 97.2676H136.328L134.219 115.502ZM141.215 106.678C140.871 109.693 141.426 111.979 142.879 113.533C144.34 115.08 146.344 115.854 148.891 115.854C151.438 115.854 153.617 115.08 155.43 113.533C157.25 111.979 158.332 109.693 158.676 106.678L158.781 106.068C159.125 103.061 158.562 100.783 157.094 99.2363C155.633 97.6816 153.629 96.9043 151.082 96.9043C148.527 96.9043 146.348 97.6816 144.543 99.2363C142.738 100.783 141.664 103.061 141.32 106.068L141.215 106.678ZM144.168 106.889L144.332 105.869C144.574 103.729 145.277 102.123 146.441 101.053C147.613 99.9746 149.066 99.4355 150.801 99.4355C152.527 99.4434 153.855 99.9824 154.785 101.053C155.723 102.123 156.07 103.729 155.828 105.869L155.664 106.9C155.422 109.033 154.711 110.639 153.531 111.717C152.359 112.795 150.91 113.334 149.184 113.334C147.449 113.334 146.117 112.795 145.188 111.717C144.266 110.639 143.926 109.029 144.168 106.889ZM160.703 115.502H163.469L164.875 103.279C164.906 103.021 164.926 102.744 164.934 102.447C164.941 102.143 164.934 101.865 164.91 101.615H165.062C165.133 101.826 165.234 102.076 165.367 102.365C165.5 102.654 165.645 102.932 165.801 103.197L173.066 115.502H176.043L178.152 97.2676H175.375L173.957 109.537C173.926 109.803 173.906 110.08 173.898 110.369C173.898 110.65 173.91 110.916 173.934 111.166L173.805 111.178C173.719 110.959 173.605 110.713 173.465 110.439C173.332 110.166 173.203 109.904 173.078 109.654L165.754 97.2676H162.812L160.703 115.502Z"
            fill="black"
            ref={pathOne}
          />
          <path
            d="M133.971 1.8231L133.966 1.82397C114.105 5.89387 85.4078 23.6839 55.2619 50.9195L55.2611 50.9202C49.2455 56.3465 41.4608 64.106 35.1777 70.7548C32.0364 74.079 29.2849 77.1102 27.3252 79.4222C26.4073 80.5051 25.6786 81.4121 25.1684 82.1082C26.5477 82.23 28.857 82.2795 32.5739 82.2795H41.5059L43.428 80.2648L43.4424 80.2497L43.4572 80.235C44.7659 78.9374 47.9425 75.4252 50.5948 72.4037L50.6 72.3977L50.6054 72.3918C55.9856 66.3924 60.0693 61.9367 62.9187 58.9765C64.3405 57.4995 65.4743 56.3746 66.3176 55.6116C66.7359 55.2332 67.1116 54.9174 67.4325 54.6876C67.5915 54.5737 67.7689 54.4579 67.9538 54.3646C68.0975 54.2921 68.4278 54.1361 68.8428 54.1361C69.2359 54.1361 69.5527 54.2662 69.7476 54.3667C69.9557 54.474 70.1365 54.6061 70.2842 54.729C70.5796 54.9747 70.8648 55.2862 71.1248 55.6101C71.6506 56.2651 72.1981 57.1269 72.6601 58.0431C73.5014 59.7114 76.3144 65.2003 78.9054 70.2267C81.4981 75.2564 84.0366 80.2901 84.6049 81.4395L84.6098 81.4494L84.6145 81.4593L85.1683 82.622L109.516 82.8156C109.516 82.8156 109.516 82.8156 109.517 82.8156C122.754 82.9163 129.867 82.9143 134.311 82.5525C136.513 82.3732 137.998 82.1093 139.21 81.7474C140.415 81.388 141.409 80.915 142.637 80.2494L142.648 80.2438C143.727 79.6698 145.102 78.4441 146.345 76.9489C147.588 75.454 148.539 73.8831 148.907 72.7348L148.91 72.7236C149.892 69.7402 150.544 66.6467 150.828 63.852C151.115 61.0328 151.017 58.6222 150.575 56.959L150.574 56.9553C150.284 55.8492 149.884 54.0801 149.656 52.9962L149.648 52.9589L149.642 52.9213C149.632 52.8572 149.573 52.6451 149.397 52.2585C149.232 51.8969 149.001 51.4592 148.712 50.9704C148.139 49.9974 147.379 48.8855 146.577 47.8666L143.49 44.1275L142.561 43.002L143.661 42.0424L145.338 40.5793C145.34 40.5775 145.342 40.5757 145.344 40.5739C146.805 39.2662 148.129 36.6107 148.925 33.2378C149.709 29.9136 149.917 26.1477 149.364 22.8531C149.173 21.7525 148.913 20.5339 148.648 19.4725C148.373 18.375 148.118 17.5531 147.953 17.184L147.946 17.1679L147.939 17.1516C147.367 15.791 146.294 14.143 145.073 12.6828C143.831 11.1971 142.593 10.0933 141.763 9.66167C140.213 8.87121 139.187 8.31571 138.523 7.83002C138.173 7.5737 137.862 7.29317 137.612 6.95168C137.351 6.59451 137.211 6.24287 137.12 5.91878C136.989 5.44856 137.047 4.91977 137.353 4.46708C137.611 4.08492 137.962 3.88197 138.19 3.77518C138.643 3.56373 139.209 3.46209 139.751 3.39671C140.894 3.25887 142.654 3.21003 145.098 3.21003C148.887 3.21003 151.769 3.4723 154.349 4.38143C149.105 1.09538 142.147 0.122943 133.971 1.8231ZM23.9248 81.9087C23.9235 81.9082 23.9229 81.9079 23.9229 81.9079L23.9248 81.9087ZM118.423 51.59H118.424C125.517 51.69 129.474 51.757 131.78 51.9555C132.929 52.0544 133.798 52.1943 134.484 52.4427C135.251 52.7203 135.732 53.1114 136.135 53.5638C137.319 54.8812 137.775 56.7972 137.734 58.5521C137.694 60.3171 137.146 62.2325 135.944 63.633L134.607 65.2891L134.157 65.8472H133.44H114.348C112.565 65.8472 110.941 65.8509 109.462 65.8544C106.521 65.8612 104.153 65.8666 102.243 65.8386C99.3988 65.797 97.4045 65.6821 95.9463 65.338C94.3696 64.9659 93.3463 64.3091 92.5054 63.2381C92.1251 62.7536 91.799 62.2067 91.4832 61.6477C91.3634 61.4355 91.2466 61.2246 91.1264 61.0076C90.9113 60.6191 90.6853 60.2111 90.4118 59.7416C87.9648 55.5418 86.1035 52.3378 84.7423 49.869C83.391 47.4181 82.4868 45.6109 81.9949 44.2283C81.509 42.8628 81.3137 41.6146 81.7948 40.4657C82.2461 39.3883 83.1882 38.7142 83.9093 38.1994L83.9277 38.1862L83.9465 38.1736C84.7553 37.6323 85.8676 36.6892 86.4378 36.1341L86.4466 36.1255L86.4556 36.1171C88.5136 34.1786 91.6925 31.41 94.4637 29.0969C95.8505 27.9393 97.1471 26.886 98.1595 26.1011C98.6641 25.7099 99.1107 25.3756 99.4686 25.1257C99.6465 25.0015 99.8171 24.8878 99.9707 24.7953C100.081 24.7288 100.296 24.6021 100.539 24.5243C100.843 24.4248 101.231 24.3892 101.483 24.368C101.822 24.3393 102.253 24.316 102.751 24.2969C103.752 24.2587 105.084 24.2349 106.628 24.2234C109.72 24.2002 113.702 24.2255 117.665 24.2842C121.628 24.343 125.582 24.4353 128.616 24.5468C130.132 24.6025 131.429 24.6634 132.387 24.728C132.864 24.7602 133.274 24.7943 133.591 24.8312C133.747 24.8495 133.901 24.8706 134.038 24.8961L134.043 24.8971C134.129 24.9132 134.374 24.9588 134.611 25.0758C137.151 26.3274 137.824 29.526 137.403 32.5254C137.256 33.5778 137.071 34.8076 136.323 35.7985C135.521 36.8619 134.292 37.4013 132.712 37.7238C131.136 38.0456 128.947 38.2016 125.916 38.2833C122.865 38.3656 118.862 38.3739 113.616 38.3739C108.634 38.3739 104.092 38.3906 100.783 38.4241C99.4765 38.4373 98.3665 38.453 97.4995 38.4713C97.5581 38.5976 97.6195 38.7296 97.6839 38.8669C98.3522 40.2915 99.3034 42.2389 100.371 44.378C100.371 44.3784 100.371 44.3787 100.371 44.3791L103.902 51.4008L118.423 51.59Z"
            fill="black"
            stroke="black"
            strokeWidth="2"
            ref={pathTwo}
          />
          <path
            d="M63.1917 10.2685C62.6853 9.36622 62.2526 8.61178 61.8964 8.00977C61.8612 8.07333 61.8257 8.13795 61.7899 8.20352C61.0884 9.67867 54.5949 22.3323 47.312 36.4878C43.677 43.5529 40.385 50.014 37.9951 54.7646C41.1276 51.5027 45.2806 47.3107 48.694 43.9178L48.6995 43.9123L48.7051 43.9068C49.344 43.2849 50.8752 41.8681 52.1318 40.7799C53.3369 39.6718 54.5591 38.5335 54.9159 38.184C55.0976 37.985 55.4231 37.6799 55.7699 37.3606C56.2029 36.9619 56.7838 36.4383 57.4699 35.8282C58.8408 34.609 60.646 33.0317 62.5632 31.3879C64.2275 29.9102 65.8427 28.4856 67.1785 27.3076C68.8972 25.7918 70.1533 24.684 70.4561 24.3958L70.4637 24.3886L70.4715 24.3814C70.5392 24.3187 70.5912 24.2689 70.631 24.2299C70.5911 24.1142 70.5201 23.937 70.3955 23.6734C70.1863 23.231 69.8785 22.6505 69.4398 21.8424L69.4357 21.8349L69.4317 21.8273C66.8151 16.8728 64.696 12.9491 63.1917 10.2685Z"
            fill="black"
            stroke="black"
            strokeWidth="2"
            ref={pathThree}
          />
        </svg>
        <Circle/>
      </Bloc>
    </Container>
  );
}

export default Loader;
